import { motion } from "framer-motion";
import "./contact.scss";
import { useRef, useState } from "react";
import {
  Modal,
  ModalOverlay,
  ModalContent,
  ModalHeader,
  ModalFooter,
  ModalBody,
  ModalCloseButton,
  useDisclosure,
  Button,
} from "@chakra-ui/react";

import emailjs from "@emailjs/browser";

const varients = {
  initial: {
    y: 500,
    opacity: 0,
  },

  animate: {
    y: 0,
    opacity: 1,
    transition: {
      duration: 0.5,
      staggerChildren: 0.1,
    },
  },
};

const Contact = () => {
  // const ref = useRef();
  const formRef = useRef();
  const { isOpen, onOpen, onClose } = useDisclosure();
  const [error, setError] = useState(false);
  const [success, setSuccess] = useState(false);

  // const isInView = useInView(ref, {margin:"-100px"})

  const sendEmail = (e) => {
    e.preventDefault();

    emailjs
      .sendForm("service_qkd2x2m", "template_gxj66ft", formRef.current, {
        publicKey: "d1qw-TOPRnYCxDp8-",
      })
      .then(
        (result) => {
          setSuccess(true);
          console.log("SUCCESS", result.text);
        },
        (error) => {
          setError(true);
          console.log("FAILED...", error.text);
        }
      );
  };

  return (
    <motion.div
      className="contact"
      variants={varients}
      initial="initial"
      whileInView="animate"
    >
      <motion.div className="textContainer" variants={varients}>
        <motion.h1 variants={varients}>Let's work together</motion.h1>
        <motion.div className="item" variants={varients}>
          <h2>Mail</h2>
          <span>talabimicheal09@gmail.com</span>
        </motion.div>
        <motion.div className="item" variants={varients}>
          <h2>Address</h2>
          <span>24 Ayodeji Ogunlana Street</span>
        </motion.div>
        <motion.div className="item" variants={varients}>
          <h2>Phone</h2>
          <span>+234 70 1316 4184</span>
        </motion.div>
      </motion.div>
      <div className="formContainer">
        <motion.div
          className="phoneSvg"
          initial={{ opacity: 1 }}
          whileInView={{ opacity: 0 }}
          transition={{ delay: 1, duration: 1 }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="512"
            height="512"
            viewBox="0 0 512 512"
            version="1.1"
          >
            <path
              initial={{ pathLength: 0 }}
              // animate={isInView && {pathLength:1}}
              transition={{ duration: 3 }}
              d="M 238.500 47.923 L 162.500 48.500 157.807 50.812 C 151.279 54.027, 145.281 60.170, 142.151 66.845 C 139.507 72.486, 139.499 72.572, 139.215 100.500 C 139.019 119.820, 138.548 129.430, 137.696 131.500 C 136.753 133.793, 136.654 140.389, 137.278 159.500 C 137.727 173.250, 138.411 245.250, 138.797 319.500 L 139.500 454.500 141.870 459.742 C 144.745 466.102, 150.025 471.074, 156.596 473.609 C 161.270 475.411, 165.551 475.500, 248 475.500 L 334.500 475.500 338.722 473.244 C 345.344 469.705, 349.685 465.341, 352.710 459.182 L 355.500 453.500 356.015 297 C 356.299 210.925, 356.299 124.975, 356.015 106 L 355.500 71.500 352.910 66 C 349.185 58.090, 345.738 54.489, 338.465 50.908 C 330.529 47.001, 336.473 47.179, 238.500 47.923 M 159.691 60.081 C 157.133 61.776, 153.674 64.886, 152.006 66.993 C 145.530 75.169, 146 59.859, 146 262.602 C 146 402.373, 146.289 448.233, 147.189 451.236 C 148.881 456.885, 156.042 464.465, 161.778 466.678 C 166.208 468.387, 171.564 468.500, 248.500 468.500 C 326.554 468.500, 330.668 468.410, 334 466.638 C 338.886 464.039, 343.789 459.215, 346.338 454.500 L 348.500 450.500 348.500 264 L 348.500 77.500 346.108 72.642 C 343.510 67.364, 338.565 61.926, 333.627 58.914 C 330.617 57.079, 327.386 57.007, 247.421 57.004 L 164.343 57 159.691 60.081 M 161.500 60.850 C 157.568 63.265, 150.205 71.330, 148.972 74.573 C 148.355 76.196, 148 145.067, 148 263.097 C 148 469.683, 147.417 452.723, 154.781 460.280 C 161.500 467.175, 159.088 467, 247.239 467 C 304.328 467, 327.403 466.676, 330.779 465.825 C 337.408 464.156, 344.289 457.132, 345.908 450.382 C 346.828 446.547, 347.012 402.227, 346.692 260.878 C 346.308 91.084, 346.141 76.106, 344.604 72.940 C 342.433 68.468, 339.005 64.622, 334.413 61.506 L 330.721 59 247.610 59.004 C 168.623 59.007, 164.351 59.099, 161.500 60.850 M 303 74 C 300.736 76.264, 300.565 77.319, 302.023 80.043 C 304.482 84.637, 311.364 84.802, 313.073 80.308 C 315.437 74.090, 307.734 69.266, 303 74 M 227 73.987 C 225.839 74.727, 225.750 75.345, 226.608 76.722 C 227.604 78.320, 229.844 78.527, 248.720 78.769 C 265.841 78.989, 269.940 78.778, 270.896 77.625 C 271.810 76.524, 271.715 75.857, 270.463 74.606 C 269.094 73.236, 265.887 73.002, 248.679 73.015 C 237.580 73.024, 227.825 73.461, 227 73.987 M 202.250 111.764 L 170 112.028 170 256.014 L 170 400 248.003 400 L 326.007 400 325.753 255.750 L 325.500 111.500 280 111.500 C 254.975 111.500, 219.988 111.619, 202.250 111.764 M 255.776 137.106 C 254.449 137.848, 254.087 139.639, 254.027 145.771 C 253.985 150.022, 253.872 155.194, 253.775 157.263 C 253.668 159.549, 254.213 161.642, 255.164 162.593 C 256.585 164.014, 256.928 163.908, 258.867 161.442 C 263.357 155.734, 264.771 145.443, 261.845 139.773 C 260.532 137.228, 257.745 136.003, 255.776 137.106 M 235.324 163.439 C 225.764 166.429, 216.527 175.213, 213.683 184.020 C 211.732 190.060, 211.493 199.214, 213.159 204.101 C 215.344 210.513, 221.906 218.427, 223.618 216.716 C 223.800 216.533, 223.233 212.874, 222.359 208.583 C 219.760 195.842, 222.541 187.120, 231.460 180.032 C 235.111 177.131, 243.283 174, 247.206 174 C 250.593 174, 251.600 166.914, 248.733 163.250 C 247.486 161.656, 240.721 161.752, 235.324 163.439 M 241.340 199.376 C 235.445 201.303, 231.398 204.464, 228.504 209.403 C 225.806 214.008, 225.149 220.749, 227.200 222.800 C 229.180 224.780, 231.739 224.177, 232.391 221.577 C 233.993 215.194, 242.782 209, 250.238 209 C 256.166 209, 259 211.163, 259 215.689 C 259 223.196, 252.137 229.274, 242.005 230.739 L 236.744 231.500 236.467 236 C 236.315 238.475, 235.871 241.967, 235.480 243.759 C 234.684 247.416, 236.155 250, 239.034 250 C 241.138 250, 245.752 244.835, 246.575 241.559 C 246.967 239.994, 248.338 238.916, 250.913 238.144 C 256.541 236.458, 262.524 231.669, 265.636 226.357 L 268.407 221.630 269.708 224.820 C 271.741 229.802, 272.831 239.952, 271.989 246.063 C 270.520 256.733, 262.294 267.956, 253.652 271.081 C 250.194 272.332, 250 272.638, 250 276.854 C 250 280.832, 250.539 281.876, 255.056 286.653 C 262.268 294.279, 264.471 299.625, 264.468 309.500 C 264.465 318.663, 262.700 323.005, 256.448 329.233 C 251.035 334.626, 245.516 337.002, 238.434 336.990 C 230.006 336.976, 223.685 333.780, 216.945 326.124 C 213.981 322.756, 210.936 320, 210.179 320 C 207.868 320, 202.190 323.063, 201.587 324.635 C 199.903 329.021, 212.376 343.840, 221.745 348.585 C 227.065 351.279, 228.332 351.500, 238.500 351.500 C 248.589 351.500, 249.984 351.262, 255.349 348.628 C 262.669 345.034, 270.665 337.003, 274.534 329.359 C 277.332 323.833, 277.500 322.819, 277.500 311.500 C 277.500 300.650, 277.251 298.973, 274.898 294 C 273.466 290.975, 270.423 286.251, 268.135 283.503 L 263.974 278.506 269.370 273.772 C 287.010 258.300, 288.658 234.546, 273.247 217.900 C 269.285 213.620, 267.491 210.800, 267.070 208.185 C 266.554 204.988, 265.779 204.126, 261.217 201.676 C 254.973 198.321, 247.287 197.432, 241.340 199.376 M 241.923 251.923 C 239.565 254.281, 239 255.709, 239 259.312 C 239 264.012, 241.768 268.880, 243.745 267.658 C 245.854 266.354, 251 257.610, 251 255.329 C 251 252.937, 247.842 249, 245.923 249 C 245.331 249, 243.531 250.315, 241.923 251.923"
              stroke="none"
              fill="black"
              fill-rule="evenodd"
            />
          </svg>
        </motion.div>
        <motion.form
          ref={formRef}
          onSubmit={sendEmail}
          initial={{ opacity: 0 }}
          whileInView={{ opacity: 1 }}
          transition={{ delay: 2 }}
        >
          <input type="text" placeholder="Name" name="to_name" />
          <input type="email" placeholder="Email" required name="from_email" />
          <textarea rows={8} placeholder="Message" name="message" />
          <button>Submit</button>
          {error && "Error"}
          {success && "Success"}
        </motion.form>
      </div>

      {/* <Button onClick={onOpen}>Trigger modal</Button> */}

      {/* <div className="modal">
        <Modal onClose={onClose} isOpen={isOpen}>
          <ModalOverlay />
          <ModalContent>
            <ModalHeader>Modal Title</ModalHeader>
            <ModalCloseButton />
            <ModalBody>
              <div className="modalStyle">
                Lorem ipsum, dolor sit amet consectetur adipisicing elit. In,
                iusto.
              </div>
            </ModalBody>
            <ModalFooter>
              <Button onClick={onClose}>Close</Button>
            </ModalFooter>
          </ModalContent>
        </Modal>
      </div> */}
    </motion.div>
  );
};

export default Contact;
